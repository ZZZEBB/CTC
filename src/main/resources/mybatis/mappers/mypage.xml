<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="mapper.mypage">
	<resultMap id="memberResult" type="memberVO">
		<result property="member_num" column="member_num"/>
		<result property="member_id" column="member_id"/>
		<result property="member_pw" column="member_pw"/>
		<result property="member_name" column="member_name"/>
		<result property="member_ph1" column="member_ph1"/>
		<result property="member_ph2" column="member_ph2"/>
		<result property="member_rrn1" column="member_rrn1"/>
		<result property="member_rrn2" column="member_rrn2"/>
		<result property="member_email" column="member_email"/>
		<result property="member_email_yn" column="member_email_yn"/>
		<result property="member_zipcode" column="member_zipcode"/>
		<result property="member_road_address" column="member_road_address"/>
		<result property="member_local_address" column="member_local_address"/>
		<result property="member_rest_address" column="member_rest_address"/>
		<result property="member_joindate" column="member_joindate"/>
		<result property="member_status" column="member_status"/>
		<result property="member_unregister_date" column="member_unregister_date"/>
		<result property="member_deldate" column="member_deldate"/>
	</resultMap>
	<resultMap id="comResult" type="companyVO">
		<result property="com_num" column="com_num"/>
		<result property="com_id" column="com_id"/>
		<result property="com_pw" column="com_pw"/>
		<result property="com_name" column="com_name"/>
		<result property="com_ceo" column="com_ceo"/>
		<result property="com_tel1" column="com_tel1"/>
		<result property="com_tel2" column="com_tel2"/>
		<result property="com_tel3" column="com_tel3"/>
		<result property="com_email" column="com_email"/>
		<result property="com_crn1" column="com_crn1"/>
		<result property="com_crn2" column="com_crn2"/>
		<result property="com_crn3" column="com_crn3"/>
		<result property="com_email_yn" column="com_email_yn"/>
		<result property="com_zipcode" column="com_zipcode"/>
		<result property="com_road_address" column="com_road_address"/>
		<result property="com_local_address" column="com_local_address"/>
		<result property="com_rest_address" column="com_rest_address"/>
		<result property="com_joindate" column="com_joindate"/>
		<result property="com_status" column="com_status"/>
		<result property="com_unregister_date" column="com_unregister_date"/>
		<result property="com_deldate" column="com_deldate"/>
	</resultMap>
	<resultMap id="orderGoodsResult" type="orderVO">
		<result property="member_id" column="member_id"/>
		<result property="goods_code" column="goods_code"/>
		<result property="order_num" column="order_num"/>
		<result property="goods_name" column="goods_name"/>
		<result property="order_date" column="order_date"/>
		<result property="pay_order_time" column="pay_order_time"/>
		<result property="pay_method" column="pay_method"/>
		<result property="card_com_name" column="card_com_name"/>
		<result property="card_pay_month" column="card_pay_month"/>
		<result property="order_status" column="order_status"/>
		<result property="pay_price" column="pay_price"/>
		<result property="refund_price" column="refund_price"/>
		<result property="pay_status" column="pay_status"/>
		<result property="total_charge_price" column="total_charge_price"/>
		<result property="use_mileage" column="use_mileage"/>
		<result property="plus_mileage" column="plus_mileage"/>
		<result property="total_pay_price" column="total_pay_price"/>
		<result property="license_id" column="license_id"/>
		<result property="license_date" column="license_date"/>
		<result property="reser_start_date" column="reser_start_date"/>
		<result property="reser_end_date" column="reser_end_date"/>
		<result property="reser_period" column="reser_period"/>
		<result property="reser_headcount" column="reser_headcount"/>
		<result property="goods_category" column="goods_category"/>
		<result property="goods_price" column="goods_price"/>
		<result property="goods_saleprice" column="goods_saleprice"/>
	</resultMap>
	
	<select id="selectMyMember" resultType="memberVO" parameterType="java.util.Map">
		<![CDATA[ SELECT * FROM member WHERE member_id = #{member_id} ]]>
	</select>
	
	<select id="selectMyCompany" resultType="companyVO" parameterType="java.util.Map">
		<![CDATA[ SELECT * FROM company WHERE com_id = #{company_id} ]]>
	</select>
	
	<!--  reservation(주문)목록 출력  -->
	<select id="selectOrderList" resultType="orderVO" parameterType="java.util.Map">
		<![CDATA[ SELECT * FROM reservation WHERE member_id = #{member_id} ]]>
	</select>
	
	<!-- 회원정보 수정 -->
   <update id="updateMember" parameterType="java.util.Map">
         update member
            <set>
               <if test=" member_pw!='' and member_pw!=null">
                 member_pw=#{member_pw},
               </if>
                <if test=" member_rrn1 !='' and member_rrn1 !=null">
                  member_rrn1 =#{member_rrn1},
               </if>
                <if test=" member_rrn2 !='' and member_rrn2 !=null">
                  member_rrn2 =#{member_rrn2},
               </if>
               <if test=" member_ph1 !='' and member_ph1 !=null">
                  member_ph1 = #{member_ph1},
               </if>
               <if test=" member_ph2 !='' and member_ph2 !=null">
                  member_ph2 = #{member_ph2},
               </if>
               <if test=" member_ph3!='' and member_ph3 !=null">
                  member_ph3 = #{member_ph3},
               </if>
               <if test=" member_email !='' and member_email !=null">
                  member_email =#{member_email},
               </if>
               <if test=" member_zipcode!='' and member_zipcode!=null">
                  member_zipcode=#{member_zipcode},
               </if>
               <if test=" member_roadAddress!='' and member_roadAddress!=null">
                  member_roadAddress=#{member_roadAddress},
               </if>              
               <if test=" member_local_address !='' and member_local_address !=null">
                  member_local_address =#{member_local_address},
               </if>
               <if test=" member_rest_address!='' and member_rest_address!=null">
                  member_rest_address=#{member_rest_address}
               </if>
            </set>
         where member_id = #{member_id}
   </update>
   
      <update id="deleteMember" parameterType="java.util.Map">
      update member 
      set member_status = 2
       where member_id = #{member_id} AND
              member_pw = #{member_pw}
   </update>
</mapper>